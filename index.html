<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Employee Registration</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<script type="text/javascript" src="https://gc.kis.v2.scr.kaspersky-labs.com/FD126C42-EBFA-4E12-B309-BB3FDD723AC1/main.js?attr=FfJqSeD3eEEe--ylMPEasTR0gnXWwBui_-EFnN7JnJIyRAvw2g64yp0myhMk6w0-JMU9X3JPVmSvq_Lk2xjrXuoGFnKIuDueibLtz5EKD3KLzlS5gD49kCTlmHzBDMQPJ2zgsnOZfqDzbLPid2DuQC5o1H_CR0zNedUrCFG9g0gSKQQZY3H-ypx1cxJ6LKkqEdhaKzBoptyWltfBy9QWiKIl4ryj-0sLDDvJMZslCJBn0yppN0uAEnpy2phuvMXvD4IumrXRV5JJFfynOYhulRCvD3snd-ypbjvlCu6D3v51N2yas509RDrK78uLoKp8Z0rVzp5h209O3pU_QKFCD-SPJ0kELkfFvTUGMnU0KgjjucGNMHl18i5KswXZt7ndIvIcN_R8XcNT1YozsZNZD-6iY0xzzPBi6ruqPWVMwsPdbsmpDI2jvStFoD4s27cZqFeMUUxtDlYlxC53WWMd3LGbna1TaJvf3JVtbHUL9guMrqFuRYmYFXETv10HBX6_ero10iHxltedH5Gr91eEcM8NjwGkoccAeCRPg0DHXc21b8yH2rV_8f6PUMfr33BO5oiYXRcXcu3TES79EzzcCIbOb_9MBcI9o9xgd-MZCOUbtPuJ4zEZrHvTOMdiQtTrnSYu-2-QRHIcuyah_N4O4dOVIaS_Qe_gHrn9khWLQTFv4KuQfKrAOrWjMXivJBcIygF4Gum0SZJLU10XkWIkyKfq4QimFZL2yIb4ZuCb60VwfvLIt_OIYipQZTeUa1Ae04fr6ZcoUV_l2OBDvFsoGv7JvBL5w8Cex2T9MpO_CvywcdSYPwM8y6puQTXf_PC2arKO_Idg4h1E6Yo8CtdKnUrQEC8XpqW-dwiALgiNPZvTbjJPFhoqx82nAsbFs7zK8s85PiYy5pRmCVauB2mclDobhQzV3INT-Uz_t2vXO-U27F-V0ez0OqELhaLsB-n7gP7KK6rVZ0qpE3EMcUBTt67snO8QovpDO9yotHTM4XCze-6oyHn_JgfBQ4wHgzRrQWTwCy43g72pNtkOEEt4UZb0VdulEObpsAU230C2qxSHT_ycs-mFBUSoWdKD6JL8kSVg6CcRB1vGjB_BSdZFqAp4ejRBiTC3O52P5h2sT4IVoB7ZaD0OI9yC5E-o9IfjWQ-gFLb-a8-6-mOhSZWZYw3q2ORoY3vYuUT-tQd7delqmn6ZaETxUsZohGOF6qSUmk2f9xK3fYZQvM6HAqSVPA" nonce="b16bd4804d90d12325d6489c22e6d3b8" charset="UTF-8"></script><script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.26/angular.min.js"></script>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
  </head>
<body>
	<div ng-app = "myApp" class = "container" style="width:550px">
	  <div style="text-align:center;color:blue">
		<h3><b>User Registration Form</b></h3>
	  </div>
		<div ng-controller = "ContactController">
		  <div align="right">
			<a href="#" ng-click="searchUser()">{{title}}</a>
		  </div>
		  <form role = "form" class="well" ng-hide="ifSearchUser">
			<div class = "form-group">
				<label for = "fname"> First Name:  </label>
				<input type = "text" id = "fname" class = "form-control" placeholder = "Enter Full Name " ng-model = "newcontact.fname" >
			</div>
			<div class = "form-group">
				<label for = "lname"> Last Name:  </label>
				<input type = "text" id = "lname" class = "form-control" placeholder = "Enter Last Name " ng-model = "newcontact.lname" >
			</div>
			<div class = "form-group">
				<label for = "name"> User Name:  </label>
				<input type = "text" id = "name" class = "form-control" placeholder = "Enter User Name " ng-model = "newcontact.name">
			</div>
			<div class = "form-group">
				<label for = "email"> Email:  </label>
				<input type = "email" id = "email" class = "form-control" placeholder = "Enter Email " ng-model = "newcontact.email" >
			</div>
			<div class = "form-group">
				<label for = "password"> Password:  </label>
				<input type = "password" id = "password" class = "form-control" placeholder = "Enter Password " ng-model = "newcontact.password" >
			</div>
			<div class = "form-group">
				<label for = "state"> State:  </label>
				<input type = "text" id = "state" class = "form-control" placeholder = "Enter State " ng-model = "newcontact.state" >
			</div>
			<div class = "form-group">
				<label for = "country"> Country:  </label>
				<input type = "text" id = "country" class = "form-control" placeholder = "Enter Country " ng-model = "newcontact.country" >
			</div>
			<br>
			<input type="hidden" ng-model="newcontact.id">
			<input type="button" class="btn btn-primary" ng-click="saveContact()" class="btn btn-primary" value = "Submit">
      <input type="reset" class="btn btn-primary"  class="btn btn-primary" value = "reset">
		  </form>

		  <div><h4><b>Registered Users</b></h4>
			<table ng-if="contacts.length" class = "table table-striped table-bordered table-hover">
			  <thead>
				<tr class = "info">
					<th>First Name</th>
					<th>Last Name</th>
					<th>User Name</th>
					<th>Email</th>
					<th>State</th>
					<th>Country</th>
					<th ng-if="!ifSearchUser">Action</th>
				</tr>
				</thead>
				<tbody>
				<tr ng-repeat = "contact in contacts">
					 <td>{{ contact.fname }}</td>
					 <td>{{ contact.lname }}</td>
					 <td>{{ contact.name }}</td>
					 <td>{{ contact.email }}</td>
					 <td>{{ contact.state }}</td>
					 <td>{{ contact.country }}</td>

					 <td ng-if="!ifSearchUser">
						<a href="#" ng-click="edit(contact.id)" role = "button" class = "btn btn-info">edit</a> &nbsp;
						<a href="#" ng-click="delete(contact.id)" role = "button" class = "btn btn-danger">delete</a>
					</td>
				</tr>
				</tbody>
			</table>
		  <div ng-hide="contacts.length > 0">No Users Found</div>
		  </div>
		</div>
	</div>
</body>

<script>
	var myApp = angular.module("myApp", []);
	myApp.service("ContactService" , function(){
		var uid = 1;
		var contacts = [];

		// Save Service for sving new contact and saving existing edited contact.
		this.save = function(contact)
		{
			if(contact.id == null)
			{
				contact.id = uid++;
				contacts.push(contact);
			}
			else
			{
				for(var i in contacts)
				{
					if(contacts[i].id == contact.id)
					{
						contacts[i] = contact;
					}
				}
			}
		};

		// serach for a contact

		this.get = function(id)
		{
			for(var i in contacts )
			{
				if( contacts[i].id == id)
				{
					return contacts[i];
				}
			}
		};

		//Delete a contact
		this.delete = function(id)
		{
			for(var i in contacts)
				{
					if(contacts[i].id == id)
					{
						contacts.splice(i,1);
					}
				}
		};
		//Show all contacts
		this.list = function()
		{
			return contacts;
		}	;
	});

	////Controller area .....

	myApp.controller("ContactController" , function($scope , ContactService){
		console.clear();

		$scope.ifSearchUser = false;
		$scope.title ="List of Users";

			$scope.contacts = ContactService.list();

			$scope.saveContact = function()
			{
			console.log($scope.newcontact);

			if($scope.newcontact == null || $scope.newcontact == angular.undefined){
				return;
			}
			else{
				ContactService.save($scope.newcontact);
				$scope.newcontact = {};
			}

			};
			$scope.delete = function(id)
			{
				ContactService.delete(id);
				if($scope.newcontact != angular.undefined && $scope.newcontact.id == id)
					{
						$scope.newcontact = {};
					}
			};
			$scope.edit = function(id)
			{
				$scope.newcontact = angular.copy(ContactService.get(id));
			};
			$scope.searchUser = function(){
			if($scope.title == "List of Users"){
				$scope.ifSearchUser=true;
				$scope.title = "Back";
			}
			else
			{
				$scope.ifSearchUser = false;
				$scope.title = "List of Users";
			}
			};
	});
</script>
</html>
